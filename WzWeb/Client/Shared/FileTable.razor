@using WzWeb.Shared
@inject HttpClient Http



@if (fileInfo == null)
{
    <Loading></Loading>
}
else
{
    <h5 class="d-inline">文件信息</h5>
    <dl class="row border">
        @{
            void RenderInfo(string name, object info)
            {
                <div class="col-sm-5">
                    <dt> @name </dt>
                </div>
                <div class="col-sm-7">
                    <dd class="text-break"> @info </dd>
                </div>
            }

            Type t = fileInfo.GetType();
            var propertyList = t.GetProperties();
            foreach (var item in propertyList)
            {
                RenderInfo(item.Name, item.GetValue(fileInfo));
            }
        }


    </dl>


}



@code {

    [Parameter]
    public Node CurrentNode { get; set; }

    private FileInfo fileInfo;



    protected override async Task OnInitializedAsync()
    {

        var resp = await Http.PostAsJsonAsync<Node>("Maple/GetFileInfo", CurrentNode);
        fileInfo = await resp.Content.ReadFromJsonAsync<FileInfo>();
    }



}

